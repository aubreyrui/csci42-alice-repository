{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Bitwise{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/python/python.min.js"></script>
    <!-- {% block styles %}{% endblock %} -->
     <style>
        #codearea,
        #output {
            height: 300px;
            font-size: 16px;
            width: 100%;
            border: 1px solid green;
            border-radius: 5px;
            padding: 12px;
            margin-bottom: 24px;
            resize: vertical;
        }

        #output {
            height: 150px;
            padding: 5px;
        }
     </style>
</head>
<body>
    <div id="content container-fluid overflow-hidden">
        <div class="row w-100">
            <div class="sidebar col-12 col-sm-2 col-xl-1 px-0 bg-secondary d-flex sticky-top justify-content-center" style="padding-left: .5rem !important;">
                <div class="d-flex flex-sm-column flex-row flex-nowrap bg-secondary align-items-center sticky-top">
                    <ul class="nav nav-pills nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center align-items-center">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="{% url 'bitwise:index' %}" id="index"><i class="bi bi-house fs-1"></i></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'modules:ModuleCategory' %}" id="module"><i class="bi bi-file-earmark-richtext fs-1"></i></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#con" id="code"><i class="bi bi-file-binary fs-1"></i></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#con" id="people"><i class="bi bi-people fs-1"></i></a>
                        </li>
                    </ul> 
                </div>
            </div>
            <div class="col p-3 min-vh-100">
                {% block main %}
                <h2>Compiler</h2>
                <form action="/modules/compiler/run" method="post">
                    {% csrf_token %}
                    <div>
                        <label for="codearea">Code Area</label>
                        <textarea id="codearea" name="codearea" rows="10" >{{ code }}</textarea>
                    </div>
                    <hr>
                    <div>
                        <label for="output">Output</label>
                        <textarea id="output" name="output" rows="4" disabled>{{ output }}</textarea>
                    </div>
                    <button type="submit">Run Code</button>
                </form>
                {% endblock %}
            </div>
        </div>
    </div>
    {% block scripts %}{% endblock %}
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            var url = window.location;
            $('ul.nav a').filter(function() {
                return this.href != url;
            }).removeClass('active');

            $('ul.nav a').filter(function() {
                return this.href == url;
            }).addClass('active');
        });
        var codeEditor = CodeMirror.fromTextArea(document.getElementById("codearea"), {
            mode: "python",
            lineNumbers: true,
            indentUnit: 4,
            extraKeys: { Tab: "indentMore", "Shift-Tab": "indentLess" },
        });
    </script>
</body>
</html>